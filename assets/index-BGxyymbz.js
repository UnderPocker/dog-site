(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const c=document.querySelector("#breed-select"),a=document.querySelector("#sub-breed-select"),i=document.querySelector("#gallery"),l=document.querySelector("#loader"),v=document.querySelector("#random-btn"),L=document.querySelector("#search"),u=document.querySelector("#favorites");let f={};async function S(){f=(await(await fetch("https://dog.ceo/api/breeds/list/all")).json()).message,p()}function p(n=""){c.innerHTML='<option value="">Выбери породу</option>',Object.keys(f).filter(e=>e.includes(n.toLowerCase())).forEach(e=>{const o=document.createElement("option");o.value=e,o.textContent=e,c.appendChild(o)})}async function m(n,e=null){let o=e?`https://dog.ceo/api/breed/${n}/${e}/images/random/5`:`https://dog.ceo/api/breed/${n}/images/random/5`;l.style.display="block",i.innerHTML="";const t=await(await fetch(o)).json();l.style.display="none",g(t.message,n,e)}function g(n,e,o){i.innerHTML="",n.forEach(s=>{const t=document.createElement("img");t.src=s,t.alt=e,t.title=o?`${e} (${o})`:e,t.addEventListener("click",()=>E(s)),i.appendChild(t)})}async function y(){l.style.display="block",i.innerHTML="";const e=await(await fetch("https://dog.ceo/api/breeds/image/random")).json();l.style.display="none";const o=e.message,s=o.split("/"),t=s[s.indexOf("breeds")+1];g([o],t)}async function b(n){return(await(await fetch(`https://dog.ceo/api/breed/${n}/list`)).json()).message}function E(n){let e=JSON.parse(localStorage.getItem("favorites"))||[];e.includes(n)||(e.push(n),localStorage.setItem("favorites",JSON.stringify(e)),h())}function h(){u.innerHTML="",(JSON.parse(localStorage.getItem("favorites"))||[]).forEach(e=>{const o=document.createElement("img");o.src=e,u.appendChild(o)})}c.addEventListener("change",async()=>{const n=c.value,e=await b(n);e.length?(a.style.display="inline",a.innerHTML='<option value="">Все подпороды</option>',e.forEach(o=>{const s=document.createElement("option");s.value=o,s.textContent=o,a.appendChild(s)})):a.style.display="none",m(n)});a.addEventListener("change",()=>{const n=c.value,e=a.value;m(n,e)});v.addEventListener("click",y);L.addEventListener("input",n=>{p(n.target.value)});document.addEventListener("DOMContentLoaded",()=>{S(),y(),h()});
